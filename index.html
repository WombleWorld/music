<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WombleWorld: 00s Indie Band Match</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#0b1f3a;color:#fff}
  header{padding:18px 16px;background:#142a52}
  h1{margin:0;font-size:20px}
  #game{max-width:980px;margin:20px auto;padding:16px}
  .board{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .panel{background:#11264a;border:1px solid #264774;border-radius:8px;padding:16px;min-height:220px}
  figure{margin:0;display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center}
  .bandTitle{font-size:22px;font-weight:700;text-align:center}
  .bandImg{max-width:100%;height:240px;object-fit:cover;border-radius:6px;border:1px solid #264774;background:#0b1f3a}
  .choices button{display:block;width:100%;text-align:left;margin:8px 0;padding:10px 12px;border-radius:6px;border:1px solid #2f538a;background:#18335f;color:#fff;cursor:pointer}
  .choices button:hover{background:#20406f}
  .row{display:flex;gap:10px;align-items:center;margin-top:10px;flex-wrap:wrap}
  .pill{background:#264774;border-radius:999px;padding:6px 10px;font-size:12px}
  .bar{height:10px;background:#264774;border-radius:6px;overflow:hidden}
  .fill{height:100%;width:0;background:#ffd200}
  .footer{opacity:.85;margin-top:10px;font-size:12px}
  .correct{outline:2px solid #5ad37c}
  .wrong{outline:2px solid #e25d5d}
  .small{font-size:12px;opacity:.9}
  .muted{opacity:.7}
  /* Reveal panel for player photo + status */
  .reveal{display:none;margin-top:12px;border-top:1px dashed #2f538a;padding-top:12px}
  .reveal figure{align-items:flex-start}
  .playerImg{width:100%;max-width:360px;height:220px;object-fit:cover;border-radius:6px;border:1px solid #264774;background:#0b1f3a}
  .status{margin-top:8px;font-weight:800;letter-spacing:.8px}
  .status.ok{color:#5ad37c}
  .status.nope{color:#e25d5d}
  .playerName{margin-top:2px;opacity:.9}
  @media (max-width:800px){.board{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <h1>WombleWorld presents: Match the Don to the 00s Indie Band</h1>
</header>

<div id="game">
  <div class="row">
    <div class="pill" id="round">Round 1/1</div>
    <div class="pill" id="score">Score 0</div>
    <div class="pill" id="streak">Streak 0</div>
    <div class="pill">Mode: <span id="modeName">Normal</span></div>
  </div>

  <div style="margin:10px 0">
    <div class="bar"><div class="fill" id="timerFill"></div></div>
    <div class="small muted" id="hint">Pick the player who screams this band’s vibe. No, not you, WUP.</div>
  </div>

  <div class="board">
    <div class="panel">
      <figure>
        <img id="bandImg" class="bandImg" alt="" loading="lazy">
        <figcaption class="bandTitle" id="bandTitle">Loading…</figcaption>
      </figure>
      <div class="footer small">WombleWorld verdicts are legally binding in the court of pub chat.</div>
    </div>

    <div class="panel">
      <div class="choices" id="choices"></div>

      <!-- Reveal: shows player photo + CORRECT/INCORRECT after selection -->
      <div class="reveal" id="reveal">
        <figure>
          <img id="revealImg" class="playerImg" alt="">
          <figcaption>
            <div id="revealStatus" class="status">CORRECT</div>
            <div id="revealName" class="playerName"></div>
          </figcaption>
        </figure>
      </div>

      <div class="row">
        <button id="skipBtn" class="pill" style="cursor:pointer;background:#20406f;border:1px solid #2f538a">Skip</button>
        <button id="hardBtn" class="pill" style="cursor:pointer;background:#6b3fbf;border:1px solid #8d62da">Hard Mode</button>
        <button id="resetBtn" class="pill" style="cursor:pointer;background:#3a5f20;border:1px solid #6fa64b">Reset</button>
      </div>
      <div class="footer small muted">Hard mode adds a timer. Like an SGM with proxies but fun.</div>
    </div>
  </div>
</div>

<script>
/* ---------- Bands (optionally with band image) ---------- */
const PAIRS = [
  {player:"Matty Stevens",    band:"Kaiser Chiefs",       quip:"Fox in the box. I Predict A Goal.",         img:"img/Kaiser_Chiefs.PNG"},
  {player:"Nathan Bishop",    band:"Bloc Party",          quip:"Shot-stopper with Silent Alarm reflexes.",  img:"img/bloc_party.jpg"},
  {player:"Marcus Browne",    band:"Franz Ferdinand",     quip:"Take Me Out. Then take two more.",         img:"img/franz_ferdinand.jpg"},
  {player:"Jake Reeves",      band:"Arctic Monkeys",      quip:"Do I Wanna Know if he runs midfield? Yes.",img:"img/arctic_monkeys.jpg"},
  {player:"Ryan Johnson",     band:"Editors",             quip:"Cold steel. Low pulse. High line.",         img:"img/editors.jpg"},
  {player:"Omar Bugiel",      band:"Kasabian",            quip:"Underrated chaos. Club Foot energy.",       img:"img/kasabian.jpg"},
  {player:"Josh Kelly",       band:"The Kooks",           quip:"Naive no. Nifty yes.",                      img:"img/the_kooks.jpg"},
  {player:"Alistair Smith",   band:"Foals",               quip:"Press. Pass. Patterns. Total Life Forever.",img:"img/foals.jpg"},
  {player:"Steve Seddon",     band:"The Libertines",      quip:"Shambolic intent. Usually works.",          img:"img/the_libertines.jpg"},
  {player:"Myles Hippolyte",  band:"Bombay Bicycle Club", quip:"Floaty. Clever. Lovely patterns.",          img:"img/bombay_bicycle_club.jpg"},
  {player:"Riley Harbottle",  band:"The Strokes",         quip:"Angles clean. Lines tidy. Very 2001.",      img:"img/the_strokes.jpg"}
];

/* ---------- Player photos (point to your uploads) ---------- */
/* If you use .png just change the extensions below. */
const PLAYER_PHOTOS = {
  "Matty Stevens":"img/players/MattyStevens.PNG",
  "Nathan Bishop":"img/players/nathan_bishop.jpg",
  "Marcus Browne":"img/players/marcus_browne.jpg",
  "Jake Reeves":"img/players/jake_reeves.jpg",
  "Ryan Johnson":"img/players/ryan_johnson.jpg",
  "Omar Bugiel":"img/players/omar_bugiel.jpg",
  "Josh Kelly":"img/players/josh_kelly.jpg",
  "Alistair Smith":"img/players/alistair_smith.jpg",
  "Steve Seddon":"img/players/steve_seddon.jpg",
  "Myles Hippolyte":"img/players/myles_hippolyte.jpg",
  "Riley Harbottle":"img/players/riley_harbottle.jpg"
};

/* ---------- Decoys pool ---------- */
const EXTRA_PLAYERS = ["Danilo Orsi","Antwoine Hackford","Callum Maycock","Omar Bugiel","Josh Kelly","Nathan Asiimwe","Patrick Bauer","Jake Reeves","Marcus Browne","Alistair Smith","Ryan Johnson","Steve Seddon","Myles Hippolyte","Riley Harbottle","Nathan Bishop"];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

let deck = [];
let idx = 0;
let score = 0;
let streak = 0;
let hard = false;
let timer=null, t=0, maxT=12;

const bandImg = document.getElementById('bandImg');
const bandTitle = document.getElementById('bandTitle');
const choicesEl = document.getElementById('choices');
const roundEl = document.getElementById('round');
const scoreEl = document.getElementById('score');
const streakEl = document.getElementById('streak');
const timerFill = document.getElementById('timerFill');
const modeName = document.getElementById('modeName');
const hintEl = document.getElementById('hint');

const revealBox = document.getElementById('reveal');
const revealImg = document.getElementById('revealImg');
const revealStatus = document.getElementById('revealStatus');
const revealName = document.getElementById('revealName');

document.getElementById('skipBtn').onclick = () => next();
document.getElementById('resetBtn').onclick = init;
document.getElementById('hardBtn').onclick = () => { hard = !hard; modeName.textContent = hard ? "Hard" : "Normal"; renderRound(); };

function init(){
  deck = shuffle([...PAIRS]);
  idx = 0; score = 0; streak = 0;
  renderRound(); // first round, no pre-increment
}

function updateHud(){
  roundEl.textContent = `Round ${Math.min(idx+1, deck.length)}/${deck.length}`;
  scoreEl.textContent = `Score ${score}`;
  streakEl.textContent = `Streak ${streak}`;
}

function startTimer(){
  clearInterval(timer); t = maxT;
  timerFill.style.width = "100%";
  timer = setInterval(()=>{
    t -= 0.1;
    timerFill.style.width = `${Math.max(0, t/maxT*100)}%`;
    if(t<=0){ clearInterval(timer); revealCorrectOnTimeout(); setTimeout(next, 2500); }
  },100);
}
function stopTimer(){ clearInterval(timer); if(!hard) timerFill.style.width = "0" }

function renderRound(){
  stopTimer();
  hideReveal();
  if(idx >= deck.length){
    bandImg.removeAttribute('src'); bandImg.alt="";
    bandTitle.textContent = "Full time.";
    choicesEl.innerHTML = "";
    hintEl.textContent = verdict();
    updateHud();
    return;
  }
  const card = deck[idx];
  // band image
  if(card.img){ bandImg.src = card.img; bandImg.alt = `${card.band}`; }
  else { bandImg.removeAttribute('src'); bandImg.alt=""; }
  bandTitle.textContent = card.band;
  hintEl.textContent = card.quip;

  // options
  const pool = new Set([card.player]);
  const roster = Array.from(new Set([...EXTRA_PLAYERS, ...PAIRS.map(p=>p.player)])).filter(n=>n!==card.player);
  shuffle(roster);
  const optionCount = hard ? 5 : 6;
  while(pool.size<optionCount) pool.add(roster.pop());
  const opts = shuffle([...pool]);

  choicesEl.innerHTML = "";
  opts.forEach(name=>{
    const btn = document.createElement('button');
    btn.textContent = name;
    btn.onclick = () => pick(name, card.player, btn);
    choicesEl.appendChild(btn);
  });

  updateHud();
  if(hard) startTimer();
}

function hideReveal(){
  revealBox.style.display = "none";
  revealImg.removeAttribute('src');
  revealImg.alt = "";
  revealStatus.textContent = "";
  revealStatus.classList.remove('ok','nope');
  revealName.textContent = "";
}

function showReveal(playerName, isCorrect, timedOut=false){
  const src = PLAYER_PHOTOS[playerName];
  if(src){ revealImg.src = src; revealImg.alt = playerName; }
  else { revealImg.removeAttribute('src'); revealImg.alt = ""; }
  if(timedOut){
    revealStatus.textContent = "TIME'S UP";
    revealStatus.classList.remove('ok','nope');
  }else if(isCorrect){
    revealStatus.textContent = "CORRECT";
    revealStatus.classList.add('ok'); revealStatus.classList.remove('nope');
  }else{
    revealStatus.textContent = "INCORRECT";
    revealStatus.classList.add('nope'); revealStatus.classList.remove('ok');
  }
  revealName.textContent = playerName;
  revealBox.style.display = "block";
}

function revealAnswer(){
  [...choicesEl.children].forEach(b=>{
    b.disabled = true;
    if(b.textContent === deck[idx].player) b.classList.add('correct');
  });
}

function pick(choice, answer, btn){
  stopTimer();
  const correct = choice===answer;
  if(correct){ score += hard?2:1; streak += 1; btn.classList.add('correct'); }
  else { streak = 0; btn.classList.add('wrong'); revealAnswer(); }
  [...choicesEl.children].forEach(b=>b.disabled = true);

  // Show the selected player's photo with status
  showReveal(choice, correct, false);

  updateHud();
  setTimeout(next, 2500);
}

function revealCorrectOnTimeout(){
  revealAnswer();
  // Show the correct player's photo with TIME'S UP
  const correctName = deck[idx].player;
  showReveal(correctName, false, true);
}

function next(){
  stopTimer();
  idx++;           // increment AFTER finishing current round
  renderRound();   // then render the next one
}

function verdict(){
  if(score >= deck.length*0.9) return "Elite taste. Promotion form. Somewhere an ESG report applauds your methodology.";
  if(score >= deck.length*0.6) return "Solid mid-table. Needs a cup run. DTB will schedule a working group.";
  return "You’ve been reading WUP again. Step away from the catastrophising and try Normal mode.";
}

init();
</script>
</body>
</html>
